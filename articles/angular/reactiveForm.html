<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reactive Form | SupremeMonster</title>
    <meta name="description" content="Frontend">
    <link rel="stylesheet" href="/assets/style.f9ffe3f5.css">
    <link rel="modulepreload" href="/assets/app.9113ee1d.js">
    <link rel="modulepreload" href="/assets/articles_angular_reactiveForm.md.e1c947b9.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ca9ccb7e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ca9ccb7e data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-a35e6f52><div class="container" data-v-a35e6f52><div class="VPNavBarTitle has-sidebar" data-v-a35e6f52 data-v-d5925166><a class="title" href="/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.jpg" data-v-e13a1912><!--]--><!--[-->SupremeMonster<!--]--><!--[--><!--]--></a></div><div class="content" data-v-a35e6f52><!--[--><!--]--><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-a35e6f52 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-a3e7452b data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a35e6f52 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/SupremeMonster" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a35e6f52 data-v-e89b88d7 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e89b88d7><div class="item appearance" data-v-e89b88d7><p class="label" data-v-e89b88d7>Appearance</p><div class="appearance-action" data-v-e89b88d7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-e89b88d7 data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e89b88d7><div class="item social-links" data-v-e89b88d7><div class="VPSocialLinks social-links-list" data-v-e89b88d7 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/SupremeMonster" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a35e6f52 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-ca9ccb7e data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-ca9ccb7e data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>地图开发总结</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/map-dev/mapbox.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Mapbox</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/map-dev/mapbox%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Mapbox开发流程</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Angular高级</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/angular/ngModule.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>NgModule</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/onPush.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>OnPush</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/viewEncapsulation.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>ViewEncapsulation</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/cli.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Cli改造</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/asyncpipe.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>pure and async pipe</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/open-in-editor.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Open-in-editor</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/httpInterceptors.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Multi Http Intercepteors</span><!----><!--]--><!----></a><a class="VPLink link link active" href="/articles/angular/reactiveForm.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>ReactiveForm</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/forwardRef.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>ForwardRef</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/zoneEventsBlacklist.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Zone Events Blacklist</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/useProviders.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Use providers</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/i18n.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>i18n</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/ng-components.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Components</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/rxjs.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>RxJS</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/rxjs-operators.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>RxJS操作符</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>组件封装</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/components/silentLoadHLS.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>silent load HLS</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>JavaScript高级</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/javascript/scope.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>作用域和作用域链</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/javascript/stringify.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>JSON stringify参数</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Chrome</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/chromeV8/hiddenClass.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>隐藏类机制</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Webpack</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/webpack/assets.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Assets静态资源</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Nodejs</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/nodejs/npm.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>npm包版本号含义</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Typescript</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/typescript/json2Interface.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>json转interface</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Vue</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/vue/20220317.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>一次故障分析</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ca9ccb7e data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-f0af2311><div class="container" data-v-f0af2311><div class="aside" data-v-f0af2311><div class="aside-curtain" data-v-f0af2311></div><div class="aside-container" data-v-f0af2311><div class="aside-content" data-v-f0af2311><div class="VPDocAside" data-v-f0af2311 data-v-aea49c31><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-aea49c31 data-v-a3de185c><div class="content" data-v-a3de185c><div class="outline-marker" data-v-a3de185c></div><div class="outline-title" data-v-a3de185c>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a3de185c><span class="visually-hidden" id="doc-outline-aria-label" data-v-a3de185c> Table of Contents for current page </span><ul class="root" data-v-a3de185c><!--[--><li data-v-a3de185c><a class="outline-link" href="#简介" data-v-a3de185c>简介</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#从最简单的例子开始" data-v-a3de185c>从最简单的例子开始</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#problems-solutions" data-v-a3de185c>Problems &amp; Solutions</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-aea49c31></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f0af2311><div class="content-container" data-v-f0af2311><!--[--><!--]--><main class="main" data-v-f0af2311><div style="position:relative;" class="vp-doc _articles_angular_reactiveForm" data-v-f0af2311><div><h1 id="reactive-form" tabindex="-1">Reactive Form <a class="header-anchor" href="#reactive-form" aria-hidden="true">#</a></h1><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-hidden="true">#</a></h2><p>表单是我们开发后台管理系统最常用的组件，Angular作为一个大而全的框架，内置的表单模块也是十分的强大，同时也伴随着很多复杂的特性。这篇文章主要介绍Angular的响应式表单，也就是ReactiveFormsModule模块。</p><p>下面我就日常开发中可能遇到的问题做一个总结记录，假设读者使用过基本的Angular表单，对FormModule、FormBuilder、FormGroup和FormControl和他们之间的关系有初步的理解。</p><p>不足之处欢迎指出，也欢迎补充~</p><h2 id="从最简单的例子开始" tabindex="-1">从最简单的例子开始 <a class="header-anchor" href="#从最简单的例子开始" aria-hidden="true">#</a></h2><p>一个最基本的登录表单长这样：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">html</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;form nz-form  [formGroup]=&quot;validateForm&quot; (ngSubmit)=&quot;submitForm()&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-control nzErrorTip=&quot;Please input your username!&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          &lt;nz-input-group&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;input formControlName=&quot;userName&quot; nz-input placeholder=&quot;Username&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          &lt;/nz-input-group&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;/nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-control nzErrorTip=&quot;Please input your Password!&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          &lt;nz-input-group&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;input formControlName=&quot;password&quot; nz-input type=&quot;password&quot; placeholder=&quot;Password&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          &lt;/nz-input-group&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;/nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          &lt;button nz-button nzType=&quot;primary&quot; [disabled]=&quot;!validateForm.valid&quot;&gt;Log in&lt;/button&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;/nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/form&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">ts</span></span>
<span class="line"><span style="color:#A6ACCD;">        constructor(private fb:FormBuilder){}</span></span>
<span class="line"><span style="color:#A6ACCD;">        ...</span></span>
<span class="line"><span style="color:#A6ACCD;">        this.validateForm = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">            userName:[&#39;&#39;],</span></span>
<span class="line"><span style="color:#A6ACCD;">            password: [&#39;&#39;],</span></span>
<span class="line"><span style="color:#A6ACCD;">        });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="problems-solutions" tabindex="-1">Problems &amp; Solutions <a class="header-anchor" href="#problems-solutions" aria-hidden="true">#</a></h2><h3 id="_1-你也许会在表单中看到ngmodel" tabindex="-1">1.你也许会在表单中看到ngModel <a class="header-anchor" href="#_1-你也许会在表单中看到ngmodel" aria-hidden="true">#</a></h3><p>Angular有基础的FormsModule（基于模板的表单）和ReactiveFormsModule（响应式表单）</p><ul><li>基于FormsModule的实现就是多个控件手动绑定ngModel。</li><li>基于ReactiveFormsModule的实现就是注入formBuilder，实例化一个formGroup，并创建多个控件，也就是formControl集合，名称和模板中的控件名称一一对应，formGoup统一管理这些集合。</li><li>绝大部分的情况下，我们都是采用响应式表单，功能更强大，可扩展性也更强。</li></ul><h3 id="_2-嵌套的formgroup" tabindex="-1">2.嵌套的formGroup <a class="header-anchor" href="#_2-嵌套的formgroup" aria-hidden="true">#</a></h3><p>我们经常遇到这样的场景，一个页面中大量的配置，他的数据结构可能是这样的：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    ccConfig:{</span></span>
<span class="line"><span style="color:#A6ACCD;">      userConfig:{</span></span>
<span class="line"><span style="color:#A6ACCD;">          ...</span></span>
<span class="line"><span style="color:#A6ACCD;">      },</span></span>
<span class="line"><span style="color:#A6ACCD;">      adminConfig:{</span></span>
<span class="line"><span style="color:#A6ACCD;">          ...</span></span>
<span class="line"><span style="color:#A6ACCD;">      },</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    imConfig:{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    globalConfig:{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    ....</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>反应到页面上可能就是一个非常多字段的嵌套表单，那我们也可以构建嵌套的formGroup， 一般的formGroup可能长这样：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">let fg = new FormGroup({</span></span>
<span class="line"><span style="color:#A6ACCD;">    name:[&#39;dingyi&#39;,...],</span></span>
<span class="line"><span style="color:#A6ACCD;">    age:[18,...]</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>那如果是嵌套的就可能是这样：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">let fg = new FormGroup({</span></span>
<span class="line"><span style="color:#A6ACCD;">    ccConfig:new FormGroup({</span></span>
<span class="line"><span style="color:#A6ACCD;">        offlinetime:[0,&#39;&#39;],</span></span>
<span class="line"><span style="color:#A6ACCD;">        ....</span></span>
<span class="line"><span style="color:#A6ACCD;">    }),</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ul><li>当提交表单的时候，通常用form.value来获取相应的值，我们按照后来接口提供的数据结构去构造我们的formGroup，我们获取到的就是嵌套的数据，几乎不用做任何冗余的组装数据或者赋值操作。</li><li>在数据回显的时候，也只需要在formControl中配置默认值即可实现，因此，在做表单功能的时候，最重要的就是formGroup的构建，如果你发现回显的时候很多地方需要手动去赋值，提交表单还需要手动组装，很有可能是你的formGroup构建有问题。</li></ul><h3 id="_3-动态表单" tabindex="-1">3.动态表单 <a class="header-anchor" href="#_3-动态表单" aria-hidden="true">#</a></h3><p>我们可能遇到的场景是，选择不同的表单模板，要显示不同的表单字段，这种场景就像我们系统中自定义字段，表单根据后台返回的字段来构建，这个在此不做过多介绍，大概思路如下：</p><ol><li>获取后台返回的字段及字段类型</li><li>构建formGroup，每一个formControl的类型都是知道的</li><li>模板中需要枚举字段类型最终生成的控件</li><li>模板中遍历字段，控件绑定formControl</li></ol><p>字段类型一般有文本框，下拉框，复选框，单选框，级联等；我们系统中用到自定义字段的场景有非常多的示例，对表单很熟悉的同学可以尝试自己封装。</p><h3 id="_4-你可能看到patchvalue和setvalue满天飞" tabindex="-1">4.你可能看到patchValue和setValue满天飞 <a class="header-anchor" href="#_4-你可能看到patchvalue和setvalue满天飞" aria-hidden="true">#</a></h3><p>看名字都是赋值，他们的区别在于：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    this.form.setValue({</span></span>
<span class="line"><span style="color:#A6ACCD;">        name:&#39;dingyi&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">        age:18</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.form.patchValue({</span></span>
<span class="line"><span style="color:#A6ACCD;">        name:&#39;dingyi&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    })</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    or</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    this.form.get(&#39;name&#39;).setValue(&#39;dingyi&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.form.get(&#39;name&#39;).patchValue(&#39;dingyi&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ul><li>单独给某一个formControl赋值时，他们基本没有区别</li><li>当给formGroup整体赋值的时候setValue必须要每一个from control都要设置值。不然,ERROR Error: Must supply a value for form control with name: &#39;xxxxx&#39;; patchValue则不需要</li></ul><h3 id="_5-对于校验的若干疑问" tabindex="-1">5.对于校验的若干疑问 <a class="header-anchor" href="#_5-对于校验的若干疑问" aria-hidden="true">#</a></h3><h4 id="_1-如何使用" tabindex="-1">1.如何使用 <a class="header-anchor" href="#_1-如何使用" aria-hidden="true">#</a></h4><p>1）首先是同步校验，在定义formControl的时候：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">  this.targetForm = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">    customerId: [&#39;&#39;, [Validators.required]],</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Validators.required就是customerId字段的校验，这是angular内置的校验。 然后需要在模板中加入错误的提示：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">    &lt;nz-form-control nzErrorTip=&quot;请输入&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">       &lt;...&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">       &lt;... formControlName=&quot;customerId&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">       &lt;.../&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>2）异步校验 同步的校验通常当鼠标移出控件焦点触发，假设我们希望在输入的过程中或者停止输入后校验，并出现转圈的提示，这种交互方式也变得越来越流行。 这种校验方式依赖于自定义的异步校验器实现，我们在这里只举个简单的例子，我们系统中这种实践并不多， 示例：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&lt;!--html--&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  &lt;nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-label [nzSpan]=&quot;7&quot; nzRequired&gt;Username&lt;/nz-form-label&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-control [nzSpan]=&quot;12&quot; nzSuccessTip=&quot;OK&quot; nzErrorTip=&quot;error&quot; nzValidatingTip=&quot;Validating...&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">          &lt;input nz-input formControlName=&quot;userName&quot; placeholder=&quot;async validate try to write JasonWood&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      &lt;/nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&lt;!--ts--&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> userNameAsyncValidator = (control: FormControl) =&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    new Observable((observer: Observer&lt;MyValidationErrors | null&gt;) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">      setTimeout(() =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">        if (control.value === &#39;dingyi&#39;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">          observer.next(`用户名已存在`);</span></span>
<span class="line"><span style="color:#A6ACCD;">        } else {</span></span>
<span class="line"><span style="color:#A6ACCD;">          observer.next(null);</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">        observer.complete();</span></span>
<span class="line"><span style="color:#A6ACCD;">      }, 1000);</span></span>
<span class="line"><span style="color:#A6ACCD;">    });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>校验状态有nzSuccessTip，nzWarningTip，nzErrorTip，nzValidatingTip，设置不同状态校验文案，对应observer的不同状态，这边只是用setTimeout模拟异步，真实场景也许是ajax请求。</p><p>3）多种校验组合 很多场景下，我们可能不止一种校验规则，例如：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">  this.targetForm = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">    customerId: [&#39;&#39;, [Validators.required,Validators.maxLength(10)]],</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">  or</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">  this.targetForm = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">    customerId: [&#39;&#39;, [Validators.Compose(Validators.required,Validators.maxLength(10))]],</span></span>
<span class="line"><span style="color:#A6ACCD;">  })</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>下面一种采用了Validtors.Compose的方法，用它的目的主要是方便重用组合式校验，例如：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">// custom-validators.ts</span></span>
<span class="line"><span style="color:#A6ACCD;">import { Validators } from &#39;@angular/forms&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">export class CustomValidators {</span></span>
<span class="line"><span style="color:#A6ACCD;">  readonly betweenZeroHundred = Validators.compose([</span></span>
<span class="line"><span style="color:#A6ACCD;">    Validators.min(0),</span></span>
<span class="line"><span style="color:#A6ACCD;">    Validators.max(100),</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]);</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// form1 </span></span>
<span class="line"><span style="color:#A6ACCD;">this.form = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">  foo: [ 0, [CustomValidators.betweenZeroHundred()]]</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">// form2</span></span>
<span class="line"><span style="color:#A6ACCD;">this.form = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">  bar: [ 100, [CustomValidators.betweenZeroHundred()]]</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>显然，我们可以用扩展运算符也能实现，作用实际上一样的，</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">export class CustomValidators {</span></span>
<span class="line"><span style="color:#A6ACCD;">  readonly betweenZeroHundred = [Validators.min(0), Validators.max(100)];</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">this.form = this.fb.group({</span></span>
<span class="line"><span style="color:#A6ACCD;">  bar: [ 100, [...CustomValidators.betweenZeroHundred, Validators.required]]</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><em><strong>所以，在系统中看到有的地方用Validators.compose,不必关心，可以不用。</strong></em></p><p>然后，html中的errortip此时就需要变成一个模板，根据不同的错误类型给出不同的提示。</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"> &lt;nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-label nzRequired&gt;customerId&lt;/nz-form-label&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;nz-form-control [nzErrorTip]=&quot;errortpl&quot; &gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;input nz-input placeholder=&quot;请输入&quot; formControlName=&quot;customerId&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/nz-form-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;ng-template #errortpl let-control&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;ng-container *ngIf=&quot;control.hasError(&#39;invalidMaxLength&#39;)&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                不超过10个字符!&lt;/ng-container&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;ng-container *ngIf=&quot;control.hasError(&#39;required&#39;)&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                请输入必填项!&lt;/ng-container&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/ng-template&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/nz-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h4 id="_2-内置校验和自定义校验" tabindex="-1">2.内置校验和自定义校验 <a class="header-anchor" href="#_2-内置校验和自定义校验" aria-hidden="true">#</a></h4><ol><li>Angular有内置的校验，都是Validators类的静态方法，可以到声明文件中查阅。</li><li>自定义校验，系统中有个pro-validators.ts可以参考，<strong>==注意区分同步异步验证==</strong>。</li></ol><h4 id="_3-如何判断验证的结果" tabindex="-1">3.如何判断验证的结果 <a class="header-anchor" href="#_3-如何判断验证的结果" aria-hidden="true">#</a></h4><p>通过表单控件的.valid属性得到验证结果，有如下几种：</p><ul><li>valid - 有效</li><li>invalid - 无效</li><li>pristine - 表单值未改变</li><li>dirty - 表单值已改变</li><li>touched - 表单控件已被访问过</li><li>untouched - 表单控件未被访问过</li></ul><h4 id="_4-reset" tabindex="-1">4.reset <a class="header-anchor" href="#_4-reset" aria-hidden="true">#</a></h4><p>==reset方法只会重置表单的值，不会重置当前校验状态== 因此，我们要实现完全的重置功能，需要搭配如下使用：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">resetForm(e: MouseEvent): void {</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.validateForm.reset(); </span></span>
<span class="line"><span style="color:#A6ACCD;">    for (const key in this.validateForm.controls) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      if (this.validateForm.controls.hasOwnProperty(key)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        this.validateForm.controls[key].markAsPristine();   </span></span>
<span class="line"><span style="color:#A6ACCD;">        this.validateForm.controls[key].updateValueAndValidity(); // 重置校验状态</span></span>
<span class="line"><span style="color:#A6ACCD;">      }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>这里为什么要在for循环里面再次用hasOwnProperty方法检查一下key，涉及到for in循环遍历对象和hasOenproperty方法的区别，详细参考：<a href="https://blog.csdn.net/hsany330/article/details/43916331" target="_blank" rel="noreferrer">https://blog.csdn.net/hsany330/article/details/43916331</a></p><p>还有markAsPristine方法，涉及到脏检查的机制，还有其他几种markAllAsTouched、markAsDirty、markAsPending、markAsTouched、markAsUnTouched，这里不过多介绍。</p><h4 id="_5-动态添加-删除校验" tabindex="-1">5.动态添加/删除校验 <a class="header-anchor" href="#_5-动态添加-删除校验" aria-hidden="true">#</a></h4><p>除了在初始化FormControl的时候添加校验，我们也可以动态添加/删除校验， Angular提供了clearValidators、setValidators和setAsyncValidators，通常在切换表单字段的时候使用。注意和上述场景类似，我们用setValidators()或者clearValidators()方法动态修改校验的时候，==务必要调用updateValueAndValidity去更新校验状态==，否则会保持上一次的校验状态。</p><h4 id="_6-提交再校验" tabindex="-1">6.提交再校验 <a class="header-anchor" href="#_6-提交再校验" aria-hidden="true">#</a></h4><p>当我们点击“提交”按钮的时候，往往还需要再校验一次，然后通过.valid属性去判断表单是否填写正确，还是那句话，==务必注意表单有变化的时候，主动去更新校验状态==，否则会出现一些意外的BUG。</p><h3 id="_6-valuechanges" tabindex="-1">6.valueChanges <a class="header-anchor" href="#_6-valuechanges" aria-hidden="true">#</a></h3><p>NgZorro的大部分控件给我们抛出了xxxChange这样的事件，从而我们可以监听到控件的变化，然而在表单中，Angular提供了一种针对表单值变化的统一监听方法，能够针对整个表单或者单个表单控件使用。如下：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">   this.targetForm.valueChanges.subscribe(res=&gt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">   })</span></span>
<span class="line"><span style="color:#A6ACCD;">   ...</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">   or</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">   this.targetForm.get(&#39;&#39;).valueChanges.subscribe(res=&gt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">   })</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>采用了订阅的方式，你可以选择监听单个/所有，当然如果你对<a href="https://cn.rx.js.org/manual/overview.html#operators-" target="_blank" rel="noreferrer">RXJS操作符</a>比较熟悉，还可以结合mergeMap、concatMap等组合多个去完成你的需求。</p><p><strong>注意：调用如下几个方法默认也会触发valueChanges事件：</strong></p><ul><li>disable</li><li>enable</li><li>reset</li><li>patchValue</li><li>setValue</li><li>setErrors</li><li>updateValueAndValidity</li><li>markAsPending</li></ul><p>也可以通过设置参数改成不触发，可参考方法的详细参数（emitEvent）。 同样的还有statusChanges，监听控件校验状态的变化，使用方式和valueChanges基本一样。</p><h3 id="_7-getrawvalue" tabindex="-1">7.getRawValue <a class="header-anchor" href="#_7-getrawvalue" aria-hidden="true">#</a></h3><p>也许你的表单有控件设置了disabled，通过.value无法获取禁用状态的控件的值，可以采用getRawValue方法去获取。</p><h3 id="summary-advice" tabindex="-1">Summary &amp; Advice <a class="header-anchor" href="#summary-advice" aria-hidden="true">#</a></h3><p>深入学习还可以去了解如下几个方面：</p><ul><li>表单中有新增一项这种需求的时候，你需要FormArray <a href="https://blog.tcs-y.com/2020/07/03/angular-reactive-form-formarray/" target="_blank" rel="noreferrer">https://blog.tcs-y.com/2020/07/03/angular-reactive-form-formarray/</a></li><li>使用ControlValueAccessor实现更强大的自定义验证器 <a href="https://zhuanlan.zhihu.com/p/97561640" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/97561640</a></li></ul></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-f0af2311 data-v-a54a85bd><!----><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/articles/angular/httpInterceptors.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>Multi Http Intercepteors</span></a></div><div class="has-prev pager" data-v-a54a85bd><a class="pager-link next" href="/articles/angular/forwardRef.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>ForwardRef</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"articles_angular_asyncpipe.md\":\"a3663d6e\",\"articles_angular_cli.md\":\"48a09616\",\"articles_angular_forwardref.md\":\"5a0703ce\",\"articles_angular_httpinterceptors.md\":\"c68eccde\",\"articles_angular_i18n.md\":\"5b01f5a9\",\"articles_angular_ng-components.md\":\"aaab5e9f\",\"articles_angular_ngmodule.md\":\"f6775f45\",\"articles_angular_onpush.md\":\"dd25b6ed\",\"articles_angular_open-in-editor.md\":\"ab71675c\",\"articles_angular_reactiveform.md\":\"e1c947b9\",\"articles_angular_rxjs-operators.md\":\"2bf1e5d3\",\"articles_angular_rxjs.md\":\"4626ea70\",\"articles_angular_useproviders.md\":\"9d8fefca\",\"articles_angular_viewencapsulation.md\":\"83d2bfa5\",\"articles_angular_zoneeventsblacklist.md\":\"9eff4df4\",\"articles_chromev8_hiddenclass.md\":\"5a4d0fa3\",\"articles_components_silentloadhls.md\":\"96a3f8fe\",\"articles_javascript_scope.md\":\"a3241e87\",\"articles_javascript_stringify.md\":\"ae2c23c1\",\"articles_map-dev_mapbox.md\":\"5f07c930\",\"articles_map-dev_mapbox地图开发流程.md\":\"a7b43b5c\",\"articles_nodejs_npm.md\":\"8a7649ab\",\"articles_typescript_json2interface.md\":\"4c4fcce0\",\"articles_vue_20220317.md\":\"f9af2f1d\",\"articles_webpack_assets.md\":\"6c09214b\",\"index.md\":\"6eba65db\"}")</script>
    <script type="module" async src="/assets/app.9113ee1d.js"></script>
    
  </body>
</html>