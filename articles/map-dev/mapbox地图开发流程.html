<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mapbox开发整体流程 | SupremeMonster</title>
    <meta name="description" content="Frontend">
    <link rel="stylesheet" href="/assets/style.f9ffe3f5.css">
    <link rel="modulepreload" href="/assets/app.9113ee1d.js">
    <link rel="modulepreload" href="/assets/articles_map-dev_mapbox地图开发流程.md.a7b43b5c.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ca9ccb7e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ca9ccb7e data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-a35e6f52><div class="container" data-v-a35e6f52><div class="VPNavBarTitle has-sidebar" data-v-a35e6f52 data-v-d5925166><a class="title" href="/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.jpg" data-v-e13a1912><!--]--><!--[-->SupremeMonster<!--]--><!--[--><!--]--></a></div><div class="content" data-v-a35e6f52><!--[--><!--]--><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-a35e6f52 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-a3e7452b data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a35e6f52 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/SupremeMonster" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a35e6f52 data-v-e89b88d7 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e89b88d7><div class="item appearance" data-v-e89b88d7><p class="label" data-v-e89b88d7>Appearance</p><div class="appearance-action" data-v-e89b88d7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-e89b88d7 data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e89b88d7><div class="item social-links" data-v-e89b88d7><div class="VPSocialLinks social-links-list" data-v-e89b88d7 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/SupremeMonster" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a35e6f52 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-ca9ccb7e data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-ca9ccb7e data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>地图开发总结</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/map-dev/mapbox.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Mapbox</span><!----><!--]--><!----></a><a class="VPLink link link active" href="/articles/map-dev/mapbox%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Mapbox开发流程</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Angular高级</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/angular/ngModule.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>NgModule</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/onPush.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>OnPush</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/viewEncapsulation.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>ViewEncapsulation</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/cli.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Cli改造</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/asyncpipe.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>pure and async pipe</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/open-in-editor.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Open-in-editor</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/httpInterceptors.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Multi Http Intercepteors</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/reactiveForm.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>ReactiveForm</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/forwardRef.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>ForwardRef</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/zoneEventsBlacklist.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Zone Events Blacklist</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/useProviders.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Use providers</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/i18n.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>i18n</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/ng-components.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Components</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/rxjs.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>RxJS</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/angular/rxjs-operators.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>RxJS操作符</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>组件封装</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/components/silentLoadHLS.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>silent load HLS</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>JavaScript高级</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/javascript/scope.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>作用域和作用域链</span><!----><!--]--><!----></a><a class="VPLink link link" href="/articles/javascript/stringify.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>JSON stringify参数</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Chrome</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/chromeV8/hiddenClass.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>隐藏类机制</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Webpack</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/webpack/assets.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Assets静态资源</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Nodejs</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/nodejs/npm.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>npm包版本号含义</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Typescript</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/typescript/json2Interface.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>json转interface</span><!----><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-f332cb62><section class="VPSidebarGroup collapsible collapsed" data-v-f332cb62 data-v-2976c796><div class="title" role="button" data-v-2976c796><h2 class="title-text" data-v-2976c796>Vue</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/articles/vue/20220317.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>一次故障分析</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ca9ccb7e data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-f0af2311><div class="container" data-v-f0af2311><div class="aside" data-v-f0af2311><div class="aside-curtain" data-v-f0af2311></div><div class="aside-container" data-v-f0af2311><div class="aside-content" data-v-f0af2311><div class="VPDocAside" data-v-f0af2311 data-v-aea49c31><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-aea49c31 data-v-a3de185c><div class="content" data-v-a3de185c><div class="outline-marker" data-v-a3de185c></div><div class="outline-title" data-v-a3de185c>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a3de185c><span class="visually-hidden" id="doc-outline-aria-label" data-v-a3de185c> Table of Contents for current page </span><ul class="root" data-v-a3de185c><!--[--><li data-v-a3de185c><a class="outline-link" href="#_1-引入mapbox" data-v-a3de185c>1.引入Mapbox</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_2-添加地图" data-v-a3de185c>2.添加地图</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_3-创建图层父类" data-v-a3de185c>3.创建图层父类</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_4-创建图层子类" data-v-a3de185c>4.创建图层子类</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_3-地图加载完成后加载图层" data-v-a3de185c>3.地图加载完成后加载图层</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_4-给图层添加数据源" data-v-a3de185c>4.给图层添加数据源</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_5-图层的样式设置" data-v-a3de185c>5.图层的样式设置</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_6-图层的特殊表现形式" data-v-a3de185c>6.图层的特殊表现形式</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_7-地图绑定事件" data-v-a3de185c>7.地图绑定事件</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_8-创建地图上其他交互组件" data-v-a3de185c>8.创建地图上其他交互组件</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#_9-参考" data-v-a3de185c>9.参考</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-aea49c31></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f0af2311><div class="content-container" data-v-f0af2311><!--[--><!--]--><main class="main" data-v-f0af2311><div style="position:relative;" class="vp-doc _articles_map-dev_mapbox%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B" data-v-f0af2311><div><h1 id="mapbox开发整体流程" tabindex="-1">Mapbox开发整体流程 <a class="header-anchor" href="#mapbox开发整体流程" aria-hidden="true">#</a></h1><h2 id="_1-引入mapbox" tabindex="-1">1.引入Mapbox <a class="header-anchor" href="#_1-引入mapbox" aria-hidden="true">#</a></h2><p>以简单的一个html为例，首先引入mapbox-gl.js以及css文件，如果是在angular项目中，则需要安装对应的npm包。</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">&lt;script src=&#39;https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.js&#39;&gt;&lt;/script&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;link href=&#39;https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.css&#39; rel=&#39;stylesheet&#39;/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="_2-添加地图" tabindex="-1">2.添加地图 <a class="header-anchor" href="#_2-添加地图" aria-hidden="true">#</a></h2><p>首先需要创建一个id假设为map的div容器，并指定宽高。</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">var map = new mapboxgl.Map({</span></span>
<span class="line"><span style="color:#A6ACCD;">  // container id</span></span>
<span class="line"><span style="color:#A6ACCD;">   container:&#39;map&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  // style location</span></span>
<span class="line"><span style="color:#A6ACCD;">   style:&#39;mapbox://styles/mapbox/streets-&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  // starting position</span></span>
<span class="line"><span style="color:#A6ACCD;">   center:[-74.50, 40],</span></span>
<span class="line"><span style="color:#A6ACCD;">  zoom:9</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>这样就通过mapbox的Map类创建了一个基础地图，通常这些配置信息都从后台接口获取。</p><h2 id="_3-创建图层父类" tabindex="-1">3.创建图层父类 <a class="header-anchor" href="#_3-创建图层父类" aria-hidden="true">#</a></h2><p>    充分利用面向对象思想，首先封装一个基础父类，由于我们大部分的都是点图层，type为symbol（只需要传入图层id和对应的图标），并可以设置默认值，如果是其他类型的图层，则单独在子类中创建，统一在父类里面添加到地图，此外，还包含诸如初始化过程（增加图层，增加图标），控制图层显示隐藏，创建销毁，图层设置数据源等方法。 如下：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">constructor(id,layers,icon){</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.id=id</span></span>
<span class="line"><span style="color:#A6ACCD;">    //如果layers不是个数组，则表示是普通点类型的layer</span></span>
<span class="line"><span style="color:#A6ACCD;">    if(!(this.layers instanceof array)){</span></span>
<span class="line"><span style="color:#A6ACCD;">     this.layers = [</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">          id: layers,</span></span>
<span class="line"><span style="color:#A6ACCD;">          type: &quot;symbol&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">          layout: {...},</span></span>
<span class="line"><span style="color:#A6ACCD;">          paint: {...},</span></span>
<span class="line"><span style="color:#A6ACCD;">          source: {</span></span>
<span class="line"><span style="color:#A6ACCD;">            type: &quot;geojson&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            data: {</span></span>
<span class="line"><span style="color:#A6ACCD;">              type: &quot;FeatureCollection&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">              features: []</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">          }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">      ];</span></span>
<span class="line"><span style="color:#A6ACCD;">    }else{ //否则就是其他类型的layer</span></span>
<span class="line"><span style="color:#A6ACCD;">      this.layers=layers</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.icon=icon</span></span>
<span class="line"><span style="color:#A6ACCD;">   ...</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    init(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    setVisible(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    destroy(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    setData(){}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="_4-创建图层子类" tabindex="-1">4.创建图层子类 <a class="header-anchor" href="#_4-创建图层子类" aria-hidden="true">#</a></h2><p>    归纳有多少个图层，由于TypeScript不支持多层继承，因此建议每一个图层都独立创造一个类继承父类，根据业务不同重写父类的方法以及增加其他方法。 图层主要分为</p><ul><li>基础图层，是构成地图基础的图像切片，通常包含大量数据——包括标注、建筑等。</li><li>叠加图层，例如点、线、面，通常包括GeoJSON之类的矢量数据，包含的信息更少，但通常我们都是与这些图层进行交互，可随意的用js进行更改。 例如创建一个厕所点图层toiletLayer类,</li></ul><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">constructor(id,layers,icon){</span></span>
<span class="line"><span style="color:#A6ACCD;">    super(&#39;toilet&#39;,&#39;&#39;,&#39;assets/img/1.png&#39;,)</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    addLayer(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    addImage(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    setVisible(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    initLayer(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    destroyLayer(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    setData(){}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...其他方法</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>再例如创建一个景区面图层ScenicLayer类，则需要在内部声明layer，type为fill</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">constructor(id,layers,icon){</span></span>
<span class="line"><span style="color:#A6ACCD;">    super(&#39;scenic&#39;,[</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">          id: &#39;tb_basis_info_polygon&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">          type: &#39;fill&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">          layout: {},</span></span>
<span class="line"><span style="color:#A6ACCD;">          minzoom: 8,</span></span>
<span class="line"><span style="color:#A6ACCD;">          maxzoom: 24,</span></span>
<span class="line"><span style="color:#A6ACCD;">          source: {</span></span>
<span class="line"><span style="color:#A6ACCD;">            type: &#39;geojson&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            data: {</span></span>
<span class="line"><span style="color:#A6ACCD;">              type: &#39;FeatureCollection&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">              features: []</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">          },</span></span>
<span class="line"><span style="color:#A6ACCD;">          paint: {</span></span>
<span class="line"><span style="color:#A6ACCD;">            &#39;fill-color&#39;: &#39;rgb(255,255,255)&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &#39;fill-opacity&#39;: 0.08</span></span>
<span class="line"><span style="color:#A6ACCD;">          }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }]</span></span>
<span class="line"><span style="color:#A6ACCD;">        ,&#39;assets/img/1.png&#39;,)</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    addLayer(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    addImage(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    setVisible(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    initLayer(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    destroyLayer(){...}</span></span>
<span class="line"><span style="color:#A6ACCD;">    setData(){}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...其他方法</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>source数据源和style属性会在后面提到。</p><h2 id="_3-地图加载完成后加载图层" tabindex="-1">3.地图加载完成后加载图层 <a class="header-anchor" href="#_3-地图加载完成后加载图层" aria-hidden="true">#</a></h2><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">map.on(&#39;load&#39;, function() {</span></span>
<span class="line"><span style="color:#A6ACCD;">  map.addLayer(.....);</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>值得注意的是，当且仅当地图数据源加载之后（包括地图样式），地图引擎提供一个加载完成后的回调事件，通知地图加载完成，之后才可以进行加载图层等一系列业务操作。</p><h2 id="_4-给图层添加数据源" tabindex="-1">4.给图层添加数据源 <a class="header-anchor" href="#_4-给图层添加数据源" aria-hidden="true">#</a></h2><p>添加新图层时需要添加数据源，图层数据源包括type和url，因此，既支持远程数据源，也支持 从后台获取（通常用这种方式，灵活可拓展），这种方法通常是GeoJSON格式的数据。 标准的geojson数据格式如下：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">const geoJson={</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;type&quot;: &quot;FeatureCollection&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  &quot;features&quot;: [</span></span>
<span class="line"><span style="color:#A6ACCD;">        {</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;type&quot;:&quot;Feature&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;properties&quot;:{},</span></span>
<span class="line"><span style="color:#A6ACCD;">        &quot;geometry&quot;:{</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;type&quot;:&quot;Point&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &quot;coordinates&quot;:[105.380859375,31.57853542647338]</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>其中，features里面是我们需要的要素信息，geometry里面是地理信息，properties则是一些名称等基本信息。可以在定义图层的时候，配置source，也可以用如下办法灵活改变数据源，如要设置刚才景点图层的数据源：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">setData(){</span></span>
<span class="line"><span style="color:#A6ACCD;">    this.map.getSource(&#39;tb_basis_info_polygon&#39;).setData(data)</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>可通过getSource(layerId)的方法获得这个layer的source，再重新赋值，但通常只赋值一次，因为这个操作消耗的性能很大，切忌频繁使用，有其他替代办法可以逐步增加或修改。</p><h2 id="_5-图层的样式设置" tabindex="-1">5.图层的样式设置 <a class="header-anchor" href="#_5-图层的样式设置" aria-hidden="true">#</a></h2><p>主要分为Layout和paint属性设置，用于明确图层如何渲染数据，就相当于css，同样是配置化。Layout属性指渲染位置和可见性，应用于渲染过程的早期阶段。paint指更精细的渲染样式，如不透明度、颜色等。不需要大量处理，在后期阶段进行渲染。例如：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">map.addLayer({</span></span>
<span class="line"><span style="color:#A6ACCD;">    id:&#39;test&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    type:&#39;fill&#39;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    source:...,</span></span>
<span class="line"><span style="color:#A6ACCD;">    layout:{</span></span>
<span class="line"><span style="color:#A6ACCD;">      visibility:&#39;visible&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    },</span></span>
<span class="line"><span style="color:#A6ACCD;">    paint:{</span></span>
<span class="line"><span style="color:#A6ACCD;">      &#39;fill-color&#39;:&#39;rgba(61,153,80,0.55)&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>即表示设置图层可见，设置面的填充色为rgba(61,153,80,0.55)。</p><h2 id="_6-图层的特殊表现形式" tabindex="-1">6.图层的特殊表现形式 <a class="header-anchor" href="#_6-图层的特殊表现形式" aria-hidden="true">#</a></h2><p>    这部分通常是开发过程中最难的地方，拓展要求最多，例如聚合、 聚合列表、特殊的需要结合canvas等实现的功能</p><h2 id="_7-地图绑定事件" tabindex="-1">7.地图绑定事件 <a class="header-anchor" href="#_7-地图绑定事件" aria-hidden="true">#</a></h2><p>    地图绑定一些鼠标移入、移出、点击、滚动缩放等事件，绑定的对象是map。 一方面可以对整个地图绑定</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">this.map.on(&#39;click&#39;,$event=&gt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">    console.log($event)</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>也可以对某一个图层进行单独的事件绑定，如：</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">this.map.on(&#39;click&#39;,&#39;tb_basis_info_polygon&#39;,$event=&gt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">    console.log($event)</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>这样只有在点击这个图层的时候才会触发，如果两者同时设置，则触发的规则和JS原生的冒泡事件一致。</p><h2 id="_8-创建地图上其他交互组件" tabindex="-1">8.创建地图上其他交互组件 <a class="header-anchor" href="#_8-创建地图上其他交互组件" aria-hidden="true">#</a></h2><p>    如图例，地图上的弹出框，信息框，控制图层的树或者tab，指北针和放大缩小按钮这些基础组件大部分地图引擎自身包含，但需要定制UI，一些特殊的要求也需要重写逻辑，这些都应该单独作为组件。他们之间的交互，以及和地图的交互，我们目前用一套Rxjs的规范去实现组件间的通信。这部分不属于地图部分，先不做详细介绍。</p><h2 id="_9-参考" tabindex="-1">9.参考 <a class="header-anchor" href="#_9-参考" aria-hidden="true">#</a></h2><p>更多进阶知识 <a href="https://giser.xyz/mapbox-gl-js-cookbook/advance/" target="_blank" rel="noreferrer">https://giser.xyz/mapbox-gl-js-cookbook/advance/</a></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-f0af2311 data-v-a54a85bd><!----><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/articles/map-dev/mapbox.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>Mapbox</span></a></div><div class="has-prev pager" data-v-a54a85bd><a class="pager-link next" href="/articles/angular/ngModule.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>NgModule</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"articles_angular_asyncpipe.md\":\"a3663d6e\",\"articles_angular_cli.md\":\"48a09616\",\"articles_angular_forwardref.md\":\"5a0703ce\",\"articles_angular_httpinterceptors.md\":\"c68eccde\",\"articles_angular_i18n.md\":\"5b01f5a9\",\"articles_angular_ng-components.md\":\"aaab5e9f\",\"articles_angular_ngmodule.md\":\"f6775f45\",\"articles_angular_onpush.md\":\"dd25b6ed\",\"articles_angular_open-in-editor.md\":\"ab71675c\",\"articles_angular_reactiveform.md\":\"e1c947b9\",\"articles_angular_rxjs-operators.md\":\"2bf1e5d3\",\"articles_angular_rxjs.md\":\"4626ea70\",\"articles_angular_useproviders.md\":\"9d8fefca\",\"articles_angular_viewencapsulation.md\":\"83d2bfa5\",\"articles_angular_zoneeventsblacklist.md\":\"9eff4df4\",\"articles_chromev8_hiddenclass.md\":\"5a4d0fa3\",\"articles_components_silentloadhls.md\":\"96a3f8fe\",\"articles_javascript_scope.md\":\"a3241e87\",\"articles_javascript_stringify.md\":\"ae2c23c1\",\"articles_map-dev_mapbox.md\":\"5f07c930\",\"articles_map-dev_mapbox地图开发流程.md\":\"a7b43b5c\",\"articles_nodejs_npm.md\":\"8a7649ab\",\"articles_typescript_json2interface.md\":\"4c4fcce0\",\"articles_vue_20220317.md\":\"f9af2f1d\",\"articles_webpack_assets.md\":\"6c09214b\",\"index.md\":\"6eba65db\"}")</script>
    <script type="module" async src="/assets/app.9113ee1d.js"></script>
    
  </body>
</html>